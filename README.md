# üîî Notification Microservice

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.

## –ß—Ç–æ —É–º–µ–µ—Ç

- **üìß –û—Ç–ø—Ä–∞–≤–∫–∞ email** —á–µ—Ä–µ–∑ Gmail –∏ SMTP
- **üè≠ –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∫–∏
- **üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å Pino
- **üîç –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- **‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
npm install

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp .env.example .env.development
# –î–æ–±–∞–≤—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –≤ .env.development

# –ó–∞–ø—É—Å–∫
npm run start:dev
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π `.env.development`:

```env
NODE_ENV=development
PORT=3000

# –î–ª—è Gmail
GMAIL_EMAIL_ADDRESS=your-email@gmail.com
GMAIL_EMAIL_PASSWORD=your-app-password
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Gmail
await notificationService.send({
  type: 'GMAIL',
  to: 'user@example.com',
  subject: '–ü—Ä–∏–≤–µ—Ç!',
  message: '<h1>Hello World</h1>'
});
```

## –ß–µ–º —Ö–æ—Ä–æ—à

### üéØ **–ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –ü–∞—Ç—Ç–µ—Ä–Ω Strategy –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### üîß **–õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å**
- –î–æ–±–∞–≤–∏–ª –Ω–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä? –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π –∫–ª–∞—Å—Å –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –≤ –º–æ–¥—É–ª–µ
- –í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

### üìä **–•–æ—Ä–æ—à–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
- –í–∏–¥–Ω–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å—Ç–∞—Ç—É—Å
- –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### üõ°Ô∏è **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- Graceful degradation –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º

### ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- –õ—ë–≥–∫–∏–π –∏ –±—ã—Å—Ç—Ä—ã–π
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

1. –î–æ–±–∞–≤—å –≤ enum:
```typescript
export enum NotificationsProviderEnum {
  GMAIL = 'GMAIL',
  TELEGRAM = 'TELEGRAM', // ‚Üê –Ω–æ–≤—ã–π
}
```

2. –°–æ–∑–¥–∞–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä:
```typescript
@Injectable()
export class TelegramProvider implements NotificationsProvider {
  async send(options: ProviderSendNotificationParameters): Promise<boolean> {
    // —Ç–≤–æ—è –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
    return true;
  }
}
```

3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –≤ –º–æ–¥—É–ª–µ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ - –≥–æ—Ç–æ–≤–æ!

## –°–∫—Ä–∏–ø—Ç—ã

```bash
npm run start:dev    # —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run build        # —Å–±–æ—Ä–∫–∞
npm run start:prod   # –ø—Ä–æ–¥–∞–∫—à–Ω
npm test            # —Ç–µ—Å—Ç—ã
npm run lint        # –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ notifications/        # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ providers/       # Gmail, SMTP –∏ —Ç.–¥.
‚îÇ   ‚îú‚îÄ‚îÄ interfaces/      # –¢–∏–ø—ã –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ enums/          # –¢–∏–ø—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ common/             # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ filters/        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ interceptors/   # –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ middlewares/    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îî‚îÄ‚îÄ logger/            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **NestJS** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Nodemailer** - –æ—Ç–ø—Ä–∞–≤–∫–∞ email
- **Pino** - –±—ã—Å—Ç—Ä–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Joi** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

–ü—Ä–æ—Å—Ç–æ–π, –Ω–∞–¥—ë–∂–Ω—ã–π –∏ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.


## –û—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –Ω–∞ —Å–≤—è–∑–∏

- Telegram - [Roman](https://t.me/nee_copirui)